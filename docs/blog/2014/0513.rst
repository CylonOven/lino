=====================
Tuesday, May 13, 2014
=====================

Uploads.

- Fixed: Inserting in UploadsByClient sets the `owner` but not the `client`.
- `CreateRow` and `SubmitInsert` may not set the `rows` attribute of
  the AJAX response when it is a `file upload
  <https://docs.djangoproject.com/en/dev/topics/http/file-uploads/>`_. Because
  can contain complex strings which cause decoding problems on the
  client when responding to a file upload.

- Overriding the `detail_layout` of `uploads.Uploads` causes subtle
  problems. I cannot simply say ``Uploads.detail_layout = "..."`` in
  :mod:`lino_welfare.modlib.uploads.models` because the
  `detail_layout` attribute has already been inherited to subclasses
  of `uploads.Uploads`.  I'll have to change something in the kernel
  startup some day: resolve layouts a bit later in a separate loop.
  Currently a visible consequence is that double-clicking on a row in
  a grid view of some subclass of Uploads shows the wrong layout.
