===========================
Thursday, November 27, 2014
===========================

More updates to the community docs.


Worked on :ticket:`17` and :ticket:`18`

A Chooser is now callable. This allowed us to write the following code::

    def on_create(self, ar):
        super(RefundConfirmation, self).on_create(ar)
        qs = self.pharmacy_choices(self.granting)
        if qs.count() > 0:
            self.pharmacy = qs[0]

Until now it was necessary to write::

        qs = self.pharmacy_choices.get_choices(granting=self.granting)


Checkin with these changes at 11:47 because it seems to work.  But the
test suite is probably broken since I changed
:mod:`lino_welfare.modlib.aids.fixtures.demo`.


Repairing the test suite was again quite some benedictine work.
Checkin at 15:00.

I discovered that :mod:`atelier` imports the :xfile:`fabfile.py`
twice, which caused duplicate entries in
:attr:`atelier.env.demo_databases`.  Current workaround is to use the
new function :func:`atelier.fablib.add_demo_database` instead of
appending directly to
:attr:`env.demo_databases <atelier.env.demo_databases>`.
Checkin at 15:40.

