=====================================
20131205 (Thursday, 05 December 2013)
=====================================

Plugins are Apps
----------------

I continued to think about what Joe and I had called "plugins".
And ha, I understood something! 
Excerpt from a mail I wrote to Joe on November 18:

    Difference between plugins and apps:

    The nature of plugins is to be another level of modularization besides
    apps, another direction of applying our analytic knife when describing a
    complex system (in case you have read "Zen and the Art of Motorcycle
    Maintenance"). Plugins can require certain apps to be installed, but the
    list of installed apps does *not* automatically lead to a list of
    *installed* plugins. This is why I have `get_installed_plugins`.
    
The thing I understood is that the above paragraph is bullshit.
The direction of your analytic knife should not depend on the fact 
whether it is a plugin or an app.
    
So I merged the classes `Plugin` and `App` and
converted our proof-of-concept plugin (`BeIdReaderPlugin`) 
into an app (named :mod:`lino.apps.beid`).

The former `BeIdJsLibPlugin` is now in :mod:`lino.apps.eid_jslib.beid`.
It overrides :mod:`lino.apps.beid`, that's why it must have the 
same app_label. Here is the content of `lino/apps`::
    
  .
  ├── beid
  └── eid_jslib
      └── beid

Note that I hereby started to grow new apps in a 
package :mod:`lino.apps` instead of :mod:`lino.modlib`.

TODO:

- move also the `setup_xxx_menu` methods from models module to App
- write documentation


Now before going on it's really time to get all test suites up and
running again.  The suites for :ref:`patrols`, :ref:`faggio` and
:ref:`welfare` had been broken for some time. Now they pass again.

I also had neglected the :fab:`userdocs` directories, now they all
build again without any warning.

Moved `get_installed_apps` method from :mod:`lino` 
to :mod:`djangosite`.
Because intuitively I'd say that this is a better place for it.
This should make no difference for applications.
One subtle difference is that ``"lino"`` is no longer at the 
end just before ``"djangosite"``.

Replace `SiteMixin` hacks by `App` usages
-----------------------------------------

A first positive effect of today's work:
I can remove the `SiteMixin` classes  from 
:mod:`lino.modlib.vat`
and
:mod:`lino_welfare.modlib.cbss`!

For the latter: to protect myself from forgetting 
to convert local settings files I added an error message.

Cool! (Just a pity that these human bodies need to sleep every
now and then ;-)
